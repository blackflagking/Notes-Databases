# RAC发展历史   

1983年 DEC VAX--cluster出现了集群的概念
在过去的年代disk（磁盘）、printer（打印机）的价格非常昂贵
出现了一种机制：多台机器共享一个磁盘柜，磁盘柜可以是数据库也可以是其他产品，    

最初是将多个无盘工作站链接起来到一个工作上，慢慢的发现成了一个容错的概念，
现在的集群还能解决负荷问题，集群中每个节点都有单独的内存、CPU、I/O  

Oracle在7版本的集群是由原厂商提供；  
8版本的时候Oracle真正推出了RAC，早起的集群名为OPS(有缓存协调)，又有一些缺陷被Oracle淘汰；  
9i的时候推出了RAC（缓存融合）。


### 要求  
各个节点要求是同一个版本（如：版本类型和版本号都要一直）。
集群内各个节点不能离得太远，因为集群对<font color="red" size="72">内网线</font>的速率要求很高。  
集群软件隐藏内部结构（Oracle中的CRS），通过DML机制实现协调内部工作。


### 集群建调优、解决内部问题就需要研究的很深    
集群上的调优是在单实例的基础上的，先学习单实例的调优  



### HA 
高可用就是7*24小时 none stop不停机，一直工作
银行要求的高可用性要求的99.9999%小数点后四个9。   

两个节点一般能达到小数点后的两个9  



容错机器--天成--  
任何一个部件坏了，另一个马上接上  


##### 
##### 负载均衡
##### 

#### 特点：  
查询可以加快
select 由于在集群中提供分布式查询的原因，所以会加快  
集群中事务快不了  
如，insert 在急群众快不了   


工作中两节点的占大部分   
4节点的很少，8节点的更少了，因为节点上来之后的管理代价很大。  


单活的应用场景：一般都是业务单一类型，一台机器down掉，另一台顶上，这台机器拿去维修。  
双活的应用场景：一般是两个应用，一般是进行应用切割，（cache filgen）一台机器上面跑一个应用。  

RAC特点   

GRID：提供集群件（CRS）和ASM

心跳线功能：传递cache filtren（buffer 交换）和相互平通看看是否还在工作状态  


Linux   --package   ---- APP（nfs） --- process   



crsctl check crs



VIP是在装grid的时候实现可以使用的。  




面试VIP知识：  
回答两个方面：  
1. 本质：为了代替OS层面的TCP/IP超时阈值机制  
2. 现象：实现VIP的调优

脑裂、健忘症是现象，Oracle的专用名词  
> OCR_VOTE <==>oracle cluster register vote  
> > 注册表--健忘症

> > 选举--脑裂   当心跳不通时，需要vote决定是哪个是属于集群的节点
> > 奇数节点选票少的partition的node重启看是否能够重新连接
> > 偶数节点中，两节点先争到共享磁盘的便使用，另一部分被独立   
> > 现在使用号小的部分作为可使用集群的节点

crs_stat -t 的信息都写在了注册表中  

OCR有三个镜像盘normal，high有5个镜像盘





















